<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ARVR Studio Pro</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
<script type="module"
src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

<style>
body{
margin:0;
background:#0b0f1a;
color:white;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
}

/* Background Canvas */
#bg{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
z-index:-1;
}

/* Sidebar */
.sidebar{
min-height:100vh;
background:rgba(20,20,35,.95);
backdrop-filter:blur(20px);
}

.sidebar a{
display:block;
padding:12px;
color:#cbd5e1;
text-decoration:none;
border-radius:10px;
transition:.3s;
}

.sidebar a:hover{
background:linear-gradient(90deg,#00f0ff,#7c3aed);
color:white;
}

/* Card */
.card-ar{
background:rgba(255,255,255,.05);
padding:20px;
border-radius:20px;
backdrop-filter:blur(10px);
position:relative;
transition:.3s;
}

.card-ar:hover{
transform:translateY(-6px);
box-shadow:0 15px 50px rgba(0,240,255,.2);
}

model-viewer{
width:100%;
height:220px;
border-radius:15px;
}

/* Delete Button */
.delete-btn{
position:absolute;
top:10px;
right:12px;
background:rgba(255,0,60,.85);
color:white;
width:30px;
height:30px;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
text-decoration:none;
font-weight:bold;
transition:.3s;
z-index:10;
}

.delete-btn:hover{
background:red;
transform:scale(1.15);
box-shadow:0 0 12px rgba(255,0,0,.7);
}

/* Footer */
.footer{
color:#94a3b8;
font-size:14px;
margin-top:50px;
}
</style>
</head>

<body>

<canvas id="bg"></canvas>

<div class="container-fluid">
<div class="row">

<!-- Sidebar -->
<div class="col-md-2 sidebar p-4">
<h4 class="text-info mb-4">ARVR Studio</h4>
<a href="/">Dashboard</a>
<a href="/create">Create Project</a>
<a href="/wall-ar">Wall AR</a>
<a href="/logout">Logout</a>
</div>

<!-- Main Content -->
<div class="col-md-10 p-4">

<h1 class="mb-4 text-info">AI Powered AR/VR Dashboard</h1>

<div class="row g-4">

{% for p in projects %}
<div class="col-md-6 col-lg-4">
<div class="card-ar">

<!-- DELETE BUTTON -->
<a href="{{ url_for('delete_project', id=p.id) }}"
onclick="return confirm('Delete this project?')"
class="delete-btn">
✕
</a>

<h5>{{ p.name }}</h5>

{% if p.type == 'model' %}

<model-viewer
src="{{ p.file_url }}"
camera-controls
auto-rotate
shadow-intensity="1"
ar>
</model-viewer>

<a href="{{ url_for('model_ar', project_id=p.id) }}"
class="btn btn-info w-100 mt-3">
View Model AR
</a>

{% else %}

<img src="{{ p.file_url }}"
class="img-fluid rounded mb-3"/>

<a href="{{ url_for('image_ar', project_id=p.id) }}"
class="btn btn-info w-100">
View Image AR
</a>

{% endif %}

</div>
</div>
{% endfor %}

</div>

<div class="footer text-center mt-5">
© 2026 ARVR Studio • AI Immersive Platform
</div>

</div>
</div>
</div>

<script>
const canvas = document.getElementById("bg");

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(
75, window.innerWidth/window.innerHeight, 0.1, 1000
);

const renderer = new THREE.WebGLRenderer({canvas:canvas, alpha:true});
renderer.setSize(window.innerWidth, window.innerHeight);

const geo = new THREE.BufferGeometry();
const verts = [];

for(let i=0;i<1200;i++){
verts.push(
THREE.MathUtils.randFloatSpread(100),
THREE.MathUtils.randFloatSpread(100),
THREE.MathUtils.randFloatSpread(100)
);
}

geo.setAttribute('position', new THREE.Float32BufferAttribute(verts,3));

const mat = new THREE.PointsMaterial({color:0x00f0ff,size:0.4});
const particles = new THREE.Points(geo,mat);

scene.add(particles);
camera.position.z = 50;

function animate(){
requestAnimationFrame(animate);
particles.rotation.y += 0.0007;
renderer.render(scene,camera);
}
animate();

window.addEventListener('resize',()=>{
renderer.setSize(window.innerWidth,window.innerHeight);
camera.aspect = window.innerWidth/window.innerHeight;
camera.updateProjectionMatrix();
});
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>