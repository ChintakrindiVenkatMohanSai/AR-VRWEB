<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Wall AR Studio</title>

<style>
body{
margin:0;
overflow:hidden;
background:black;
font-family:Arial;
}

/* CAMERA */
video{
position:fixed;
top:0;
left:0;
width:100vw;
height:100vh;
object-fit:cover;
z-index:0;
}

/* AR PLATE */
.arPlate{
position:fixed;
top:40%;
left:40%;
width:260px;
height:180px;
z-index:5;
cursor:grab;
border-radius:12px;
box-shadow:0 20px 50px rgba(0,0,0,.7);
}

/* ACTIVE */
.arPlate.active{
outline:2px solid #00e5ff;
}

/* DELETE */
.deleteBtn{
position:absolute;
top:-12px;
right:-12px;
background:red;
color:white;
width:26px;
height:26px;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
opacity:0;
pointer-events:none;
}
.arPlate.active .deleteBtn{
opacity:1;
pointer-events:auto;
}

/* RESIZE HANDLES */
.handle{
position:absolute;
background:#00e5ff;
border-radius:50%;
width:14px;
height:14px;
opacity:0;
pointer-events:none;
}
.arPlate.active .handle{
opacity:1;
pointer-events:auto;
}

/* Corners */
.tl{top:-7px;left:-7px;cursor:nwse-resize;}
.tr{top:-7px;right:-7px;cursor:nesw-resize;}
.bl{bottom:-7px;left:-7px;cursor:nesw-resize;}
.br{bottom:-7px;right:-7px;cursor:nwse-resize;}

/* Edges */
.tm{top:-7px;left:50%;transform:translateX(-50%);cursor:ns-resize;}
.bm{bottom:-7px;left:50%;transform:translateX(-50%);cursor:ns-resize;}
.ml{left:-7px;top:50%;transform:translateY(-50%);cursor:ew-resize;}
.mr{right:-7px;top:50%;transform:translateY(-50%);cursor:ew-resize;}

/* PANEL */
.panel{
position:fixed;
bottom:20px;
left:50%;
transform:translateX(-50%);
display:flex;
gap:10px;
background:rgba(20,20,20,.6);
padding:10px 20px;
border-radius:50px;
color:white;
z-index:20;
backdrop-filter:blur(14px);
}

button{
background:#00bcd4;
border:none;
padding:8px 16px;
border-radius:20px;
color:white;
cursor:pointer;
}
</style>
</head>

<body>

<div class="panel">
ðŸŽ¨ Wall AR
<input type="color" id="colorPick">
<button onclick="addColor()">Add</button>
<input type="file" id="texUpload">
<button onclick="addTexture()">Texture</button>
</div>

<script>

/* CAMERA */
async function startCamera(){
const stream=await navigator.mediaDevices.getUserMedia({
video:{facingMode:{ideal:"environment"}}
});
let v=document.createElement("video");
v.srcObject=stream;
v.autoplay=true;
v.playsInline=true;
document.body.prepend(v);
}
window.onload=startCamera;


/* CREATE PLATE */
function createPlate(){

let div=document.createElement("div");
div.className="arPlate";

/* Activate */
div.onclick=e=>{
e.stopPropagation();
document.querySelectorAll(".arPlate")
.forEach(p=>p.classList.remove("active"));
div.classList.add("active");
};

/* Delete */
let del=document.createElement("div");
del.className="deleteBtn";
del.innerHTML="âœ–";
del.onclick=()=>div.remove();
div.appendChild(del);

/* Handles */
["tl","tr","bl","br","tm","bm","ml","mr"].forEach(c=>{
let h=document.createElement("div");
h.className="handle "+c;
div.appendChild(h);
resize(div,h,c);
});

drag(div);

document.body.appendChild(div);
return div;
}

/* CLICK OUTSIDE */
document.body.onclick=()=>{
document.querySelectorAll(".arPlate")
.forEach(p=>p.classList.remove("active"));
};


/* COLOR */
function addColor(){
let p=createPlate();
p.style.background=document.getElementById("colorPick").value;
}

/* TEXTURE */
function addTexture(){
let file=document.getElementById("texUpload").files[0];
if(!file) return;
let p=createPlate();
p.style.background=`url(${URL.createObjectURL(file)}) center/cover`;
}


/* DRAG */
function drag(el){

let offsetX,offsetY;

el.onmousedown=e=>{
offsetX=e.clientX-el.offsetLeft;
offsetY=e.clientY-el.offsetTop;

document.onmousemove=e=>{
el.style.left=e.clientX-offsetX+"px";
el.style.top=e.clientY-offsetY+"px";
};

document.onmouseup=()=>{
document.onmousemove=null;
};
};
}


/* RESIZE */
function resize(el,h,type){

h.onmousedown=e=>{
e.stopPropagation();

let startX=e.clientX;
let startY=e.clientY;

let startW=el.offsetWidth;
let startH=el.offsetHeight;
let startL=el.offsetLeft;
let startT=el.offsetTop;

document.onmousemove=e=>{

let dx=e.clientX-startX;
let dy=e.clientY-startY;

if(type.includes("r")) el.style.width=startW+dx+"px";
if(type.includes("l")){
el.style.width=startW-dx+"px";
el.style.left=startL+dx+"px";
}

if(type.includes("b")) el.style.height=startH+dy+"px";
if(type.includes("t")){
el.style.height=startH-dy+"px";
el.style.top=startT+dy+"px";
}
};

document.onmouseup=()=>{
document.onmousemove=null;
};
};
}

</script>
</body>
</html>